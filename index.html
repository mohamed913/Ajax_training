<!DOCTYPE html>
<head>
    <title>ajax training</title>
    
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="bootstrap/bootstrap.min.css" />

  
</head>
<body>
    <h2>experement functions by buttons and print in console</h2>	
    <table class="table table-dark table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Button</th>
            <th scope="col">Usage</th>
            <th scope="col">Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td><button type="button" class="btn btn-info" onclick="myxhr()">click here json</button></td>
            <td>Otto</td>
            <td>@mdo</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td><button type="button" class="btn btn-info" onclick="myxhr2()">click here txt</button></td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td><button type="button" class="btn btn-info" onclick="myxhr3()">click here php get</button></td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td><button type="button" class="btn btn-info" onclick="myxhr4()">click here php post</button></td>
            <td>Thornton</td>
            <td>@fat</td>
          </tr>
        
        </tbody>
      </table>


    

<div id="first">

</div>

<div id="one">

</div>
<div id="two">

</div>
<div id="three">

</div>

<body>
    <h2>add new comment to php comment page</h2>	
    <table class="table table-dark table-striped">
        <thead>
         
        </thead>
        <tbody>
          <tr>
            
            <td><input type="text" name="comment" class="form-control" placeholder="add comment" id="input_comment" ></td>
            <td><button type="button" class="btn btn-info" id="addcomment">add comment</button></td>
            
          </tr>
          
        
        </tbody>
      </table>

<span id="secondSpan">
    iam secondSpan
</span>


    
    


<div id="comments">



</div>
<button type="button" class="btn btn-info"  id="mybutton">click here jquery get</button>
<button type="button" class="btn btn-info" id="mybutton2">click here jquery post</button>

<script>
   //////////////////////////////////read from json file//////////////////////////////////////////
    //i made function to when i call it make the xhr connection
    function myxhr(){
// i assigned the xhr to avariable named my request
        var myrequest=new XMLHttpRequest();
        // open the request to
         myrequest.open("GET","http://127.0.0.1/ajaxTraining/json/mohamed.json",true);
myrequest.onreadystatechange=function(){
    console.log(this.readyState);
  console.log(this.status);
if(this.readyState===4 /*the request is finished*/&& this.status===200/*the server is responed*/){
    //convert the json object to javascript object
    //the responsetext is the response of the server on my request
myjsobject=JSON.parse(this.responseText);

//loop on the data after converting it on js obbject
    for(let i=0;i<myjsobject.length;i++)
    {
        console.log(myjsobject[i].username);
    }
 // console.log(this.responseText);
 
}

}
myrequest.send();

    }
        //////////////////////////////////end read from json file//////////////////////////////////////////

       //////////////////////////////////read from txt file//////////////////////////////////////////
    //i made function to when i call it make the xhr connection
    function myxhr2(){
// i assigned the xhr to avariable named my request
        var myrequest=new XMLHttpRequest();
        // open the request to
         myrequest.open("GET","http://127.0.0.1/ajaxTraining/txtfile/mohamed.txt",true);
myrequest.onreadystatechange=function(){
    console.log(this.readyState);
  console.log(this.status);
if(this.readyState===4 /*the request is finished*/&& this.status===200/*the server is responed*/){

     //the responsetext is the response of the server on my request
        console.log(this.responseText);
    
 // console.log(this.responseText);
 
}

}
myrequest.send();

    }

//////////////////////////////////end read from txt file//////////////////////////////////////////

     //////////////////////////////////read from php file (GET)//////////////////////////////////////////
    //i made function to when i call it make the xhr connection
    function myxhr3(){
// i assigned the xhr to avariable named my request
        var myrequest=new XMLHttpRequest();
        // open the request to
         myrequest.open("GET","http://127.0.0.1/ajaxTraining/phpfile/mohamed.php?name=gemy&age=28",true);
myrequest.onreadystatechange=function(){
    console.log(this.readyState);
  console.log(this.status);
if(this.readyState===4 /*the request is finished*/&& this.status===200/*the server is responed*/){

     //the responsetext is the response of the server on my request
        console.log(this.responseText);
    
 // console.log(this.responseText);
 
}

}
myrequest.send();

    }

//////////////////////////////////end read from php file(GET)//////////////////////////////////////////

     //////////////////////////////////read from php file (POST)//////////////////////////////////////////
    //i made function to when i call it make the xhr connection
    function myxhr4(){
// i assigned the xhr to avariable named my request
        var myrequest=new XMLHttpRequest();
       
myrequest.onreadystatechange=function(){
    console.log(this.readyState);
  console.log(this.status);
if(this.readyState===4 /*the request is finished*/&& this.status===200/*the server is responed*/){

     //the responsetext is the response of the server on my request
        console.log(this.responseText);
    
 // console.log(this.responseText);
 
}

}
 // open the request to
 myrequest.open("POST","http://127.0.0.1/ajaxTraining/phpfile/mohamed.php",true);
myrequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
myrequest.send("name=ali&age=23");

    }

//////////////////////////////////end read from php file(POST)//////////////////////////////////////////
</script>
  



<!--------------------------------------start the training by jquery------------------------------------------------>
<script src="jquery/jquery-2.1.4.min.js"></script>
<script>
    //trainin on function of load
    $(function(){

        $("#first").load("http://127.0.0.1/ajaxTraining/txtfile/mohamed.txt");

    });
//THE LOAD FUNCTION TAKE TWO PARAMERTERS FIRST IS THE SOURCE AND SECOND IS CALLBACK FUNCTION
    $(function(){

$("#secondSpan").load("http://127.0.0.1/ajaxTraining/Demo/demo.html #demodiv",function(responseText ,statusText, XHR){

document.getElementById("one").innerHTML=responseText;
document.getElementById("two").innerHTML=statusText;
document.getElementById("three").innerHTML=XHR.responseText;

});

});

//GET METHOD WITH THE JQUERY 
$(function(){
    $("#mybutton").on("click",function(){
       $.get("http://127.0.0.1/ajaxTraining/phpfile/mohamed.php?name=gemy&age=28",function(responsetext,statustext,xhr)
       {
            alert(responsetext+statustext+xhr);
       });
    });
});

//post METHOD WITH THE JQUERY 
$(function(){
    $("#mybutton2").on("click",function(){
       $.post("http://127.0.0.1/ajaxTraining/phpfile/mohamed.php?",{name:"sayed",age:12},function(responsetext,statustext,xhr)
       {
            alert(responsetext+statustext+xhr);
       });
    });
});
   

///////////////////////example from the real life //////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////

//function to get all comments when the document load
  $(document).ready(function() {

    $.ajax({
        method:"GET",
        url:"http://127.0.0.1/ajaxTraining/phpfile/comments.php",
      
      success:function(responsetext,statustext,xhr){
            if(statustext=="success"){
        $("#comments").html(responsetext);
        }
      },
      error:function(xhr,status,error){
            console.log(error);
            },
          });
   });

   //end  function to get all comments when the document load


//function to post the new comments when click on add comment button
    $(function(){
 $("#addcomment").on("click",function(){
         $.ajax({
        method:"POST",
        url:"http://127.0.0.1/ajaxTraining/phpfile/comments.php",
        data:{
            //comment will send in the post method and add to comments which in array there
           comment:$("#input_comment").val(),
        },
      
        success:function(responsetext,statustext,xhr){
            if(statustext=="success"){
             $("#comments").html(responsetext);
             }
            },
        error:function(xhr,status,error){
           console.log(error);
              },
        complete:function(xhr,status){
           //when compelte get all comments to show the new comment
            $.ajax({
        method:"GET",
        url:"http://127.0.0.1/ajaxTraining/phpfile/comments.php",
         success:function(responsetext,statustext,xhr){
            if(statustext=="success"){
               $("#comments").html(responsetext);
              }
            },
        error:function(xhr,status,error){
          console.log(error);
               },
              
               });
              
              },
            });

     });
});
    
</script>
<script src="bootstrap/bootstrap.min.js"></script>

</body>



</html>